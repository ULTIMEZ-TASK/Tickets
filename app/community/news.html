<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Marketing Analytics Matrix 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .badge-yes { @apply bg-green-100 text-green-800 border border-green-200; }
        .badge-no { @apply bg-red-100 text-red-800 border border-red-200; }
        .badge-partial { @apply bg-yellow-100 text-yellow-800 border border-yellow-200; }
        .badge-base { @apply px-2.5 py-0.5 rounded-full text-xs font-medium inline-flex items-center gap-1; }
        
        /* Modal Transitions */
        .modal {
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease-out;
        }
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            transform: scale(0.98) translateY(10px);
            transition: all 0.2s ease-out;
        }
        .modal.active .modal-content {
            transform: scale(1) translateY(0);
        }

        /* Modern Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Task Table Animation */
        .task-row {
            transition: all 0.2s ease;
        }
        .task-row.completed .task-text {
            color: #94a3b8;
            text-decoration: line-through;
        }
        .task-row.completed .checkbox-box {
            background-color: #2563eb;
            border-color: #2563eb;
        }
        .task-row.completed .checkbox-icon {
            opacity: 1;
            transform: scale(1);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen p-4 md:p-8">

    <!-- Header Section -->
    <div class="max-w-7xl mx-auto mb-8">
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div>
                <h1 class="text-3xl font-bold text-slate-900 tracking-tight">Analytics Matrix 2026</h1>
                <p class="text-slate-500 mt-1">Click on any <span class="text-blue-600 font-semibold border-b border-blue-200">Platform Name</span> to launch the Strategy Dashboard.</p>
            </div>
            
            <!-- Search Input -->
            <div class="relative w-full md:w-72">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i data-lucide="search" class="h-5 w-5 text-gray-400"></i>
                </div>
                <input type="text" id="searchInput" onkeyup="filterTable()" 
                    class="block w-full pl-10 pr-3 py-2.5 border border-gray-200 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 sm:text-sm shadow-sm transition-all" 
                    placeholder="Search platforms or metrics...">
            </div>
        </div>
    </div>

    <!-- Table Container -->
    <div class="max-w-7xl mx-auto bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200" id="analyticsTable">
                <thead class="bg-slate-50">
                    <tr>
                        <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider w-1/6">Platform</th>
                        <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider w-1/2">Key Analytical Insights & Metrics</th>
                        <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider w-1/6">API Access</th>
                        <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider w-1/6">Manual Export</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    
                    <!-- 1. CoinMarketCap -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('CoinMarketCap')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="coins" class="w-5 h-5 text-blue-600"></i> 
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">CoinMarketCap</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Community:</strong> Bullish/Bearish Votes, Watchlist Count</li>
                                <li><strong>Market:</strong> Price, Vol/MCap Ratio (Velocity)</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Financial)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-no">No</span>
                        </td>
                    </tr>

                    <!-- 2. Binance Square -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('Binance Square')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="layout-grid" class="w-5 h-5 text-yellow-500"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">Binance Square</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Reach:</strong> Total Views, "Sticky" Factor</li>
                                <li><strong>Conversion:</strong> New Followers/Article, Campaign Rank</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-no">No</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Dashboard)</span>
                        </td>
                    </tr>

                    <!-- 3. X (Twitter) -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('X (Twitter)')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="twitter" class="w-5 h-5 text-black"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">X (Twitter)</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Velocity:</strong> Replies in first 30 mins</li>
                                <li><strong>Quality:</strong> Retweets vs. Quotes, Profile Visits</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Paid)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes</span>
                        </td>
                    </tr>

                    <!-- 4. Medium -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('Medium')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="book-open" class="w-5 h-5 text-gray-800"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">Medium</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Retention:</strong> Read Ratio (%), Avg Read Time</li>
                                <li><strong>Traffic:</strong> Internal vs. SEO, Email Subs gained</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-no">No (Publish Only)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-no">No</span>
                        </td>
                    </tr>

                    <!-- 5. LinkedIn -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('LinkedIn')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="linkedin" class="w-5 h-5 text-blue-700"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">LinkedIn</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Authority:</strong> SSI Score, Dwell Time</li>
                                <li><strong>Demographics:</strong> Job Titles, Industry, Seniority</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Pages)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (XLS)</span>
                        </td>
                    </tr>

                    <!-- 6. Facebook -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('Facebook')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="facebook" class="w-5 h-5 text-blue-600"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">Facebook</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Video:</strong> 3s vs 1m Retention, Top Fans</li>
                                <li><strong>Health:</strong> Negative Feedback (Hides/Unfollows)</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Graph API)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes</span>
                        </td>
                    </tr>

                    <!-- 7. Instagram -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('Instagram')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="instagram" class="w-5 h-5 text-pink-600"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">Instagram</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Intent:</strong> Saves (Bookmarks), Story Exit Rate</li>
                                <li><strong>Discovery:</strong> Reach (Non-Followers)</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Graph API)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes</span>
                        </td>
                    </tr>

                    <!-- 8. Reddit -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('Reddit')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="message-circle" class="w-5 h-5 text-orange-600"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">Reddit</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Sentiment:</strong> Upvote Ratio (%), Comment Volume</li>
                                <li><strong>Safety:</strong> Shadowban Risk, Subreddit Rank</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Paid)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-no">No (Scrape)</span>
                        </td>
                    </tr>

                    <!-- 9. Discord -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('Discord')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="gamepad-2" class="w-5 h-5 text-indigo-500"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">Discord</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Churn:</strong> Joins vs. Leaves, Voice Peak Users</li>
                                <li><strong>Density:</strong> % of Users with "Active" Roles</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Bot)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-no">No</span>
                        </td>
                    </tr>

                    <!-- 10. Quora -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('Quora')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="help-circle" class="w-5 h-5 text-red-700"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">Quora</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>SEO:</strong> Organic Search Views, "Collapse" Status</li>
                                <li><strong>Ads:</strong> CTR (if promoting)</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-partial">Partial (Ads)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-no">No</span>
                        </td>
                    </tr>

                    <!-- 11. WhatsApp -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('WhatsApp')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="phone" class="w-5 h-5 text-green-500"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">WhatsApp</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Engagement:</strong> Reaction Diversity, Delivery Rate</li>
                                <li><strong>Click:</strong> Link Clicks (via Bit.ly/UTM)</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Business)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes</span>
                        </td>
                    </tr>

                    <!-- 12. YouTube -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('YouTube')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="youtube" class="w-5 h-5 text-red-600"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">YouTube</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Retention:</strong> Avg View Duration (AVD), CTR</li>
                                <li><strong>Traffic:</strong> Suggested Video % (Viral Engine)</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (High)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Studio)</span>
                        </td>
                    </tr>

                    <!-- 13. Substack -->
                    <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('Substack')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="mail" class="w-5 h-5 text-orange-500"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">Substack</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Growth:</strong> Total Subscribers, Open Rate</li>
                                <li><strong>Network:</strong> Subscriber Overlap (Recommendations)</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-no">No</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (CSV)</span>
                        </td>
                    </tr>

                     <!-- 14. Gitter -->
                     <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('Gitter')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="code-2" class="w-5 h-5 text-purple-600"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">Gitter</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Responsiveness:</strong> Time-to-Reply (DevRel)</li>
                                <li><strong>Lurkers:</strong> Active Chatters vs Total Members</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes (Matrix)</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes</span>
                        </td>
                    </tr>

                     <!-- 15. Tumblr -->
                     <tr class="hover:bg-slate-50 transition-colors group">
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-slate-800">
                            <button onclick="openModal('Tumblr')" class="flex items-center gap-3 hover:text-blue-600 transition-colors w-full text-left py-1">
                                <i data-lucide="image" class="w-5 h-5 text-blue-900"></i>
                                <span class="border-b border-transparent group-hover:border-blue-600 transition-all">Tumblr</span>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-sm text-gray-600 leading-relaxed">
                            <ul class="list-disc list-inside space-y-1">
                                <li><strong>Spread:</strong> Reblog Depth, Tag Performance</li>
                                <li><strong>Notes:</strong> Total Interactions (Likes + Reblogs)</li>
                            </ul>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-yes">Yes</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="badge-base badge-no">No</span>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
        <!-- Footer -->
        <div class="bg-white px-6 py-6 border-t border-gray-200 mt-6 rounded-lg shadow-sm">
            <p class="text-xs text-gray-400 text-center font-medium">Built for 2026 Optimization Strategy. Click platform names for interactive checklists.</p>
        </div>
    </div>

    <!-- Strategy Modal (Improved UX with Table) -->
    <div id="strategyModal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>
        
        <!-- Modal Content -->
        <div class="modal-content bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[85vh] flex flex-col relative z-10 overflow-hidden">
            
            <!-- Header -->
            <div class="bg-white px-6 pt-6 pb-4 border-b border-gray-100 flex flex-col gap-4">
                <div class="flex justify-between items-start">
                    <div class="flex items-center gap-3">
                        <!-- Dynamic Icon Container -->
                        <div id="modalIconContainer" class="w-10 h-10 rounded-xl flex items-center justify-center bg-gray-100">
                            <i id="modalIcon" data-lucide="layers" class="w-6 h-6 text-gray-600"></i>
                        </div>
                        <div>
                            <h2 id="modalTitle" class="text-xl font-bold text-gray-900">Platform Strategy</h2>
                            <p class="text-xs text-gray-500 font-medium mt-0.5">Optimization & Growth Checklist</p>
                        </div>
                    </div>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 hover:bg-gray-100 p-2 rounded-full transition-all">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                </div>

                <!-- Progress Bar -->
                <div class="w-full">
                    <div class="flex justify-between text-xs font-semibold text-gray-500 mb-1.5">
                        <span id="progressText">0 of 10 completed</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="h-2 w-full bg-gray-100 rounded-full overflow-hidden">
                        <div id="progressBar" class="h-full bg-blue-600 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Segmented Control Tabs -->
                <div class="flex p-1 bg-gray-100 rounded-lg mt-2">
                    <button id="tabRoutine" onclick="switchTab('routine')" class="flex-1 py-2 text-sm font-semibold rounded-md transition-all shadow-sm bg-white text-gray-900">
                        Routine Tasks
                    </button>
                    <button id="tabSOPs" onclick="switchTab('sops')" class="flex-1 py-2 text-sm font-semibold rounded-md transition-all text-gray-500 hover:text-gray-700">
                        Strategy SOPs
                    </button>
                </div>
            </div>
            
            <!-- Scrollable Body (Table Format) -->
            <div class="overflow-y-auto flex-1 custom-scrollbar bg-white">
                <table class="min-w-full text-left border-collapse">
                    <thead class="bg-slate-50 sticky top-0 z-10">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider w-16 text-center">Status</th>
                            <th scope="col" class="px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider w-full">Action Item</th>
                            <th scope="col" class="px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider w-32 text-right">Progress</th>
                        </tr>
                    </thead>
                    <tbody id="strategyTableBody" class="divide-y divide-gray-100">
                        <!-- Rows injected here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Footer -->
            <div class="px-6 py-4 bg-white border-t border-gray-100 flex justify-between items-center">
                <span class="text-xs text-gray-400 font-medium">Press ESC to close</span>
                <button onclick="closeModal()" class="px-5 py-2.5 bg-gray-900 hover:bg-gray-800 text-white text-sm font-semibold rounded-xl transition-all shadow-lg shadow-gray-200">
                    Done
                </button>
            </div>
        </div>
    </div>

    <script>
        // Wait for DOM to load
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            
            // Add Keyboard support for ESC
            document.addEventListener('keydown', function(event) {
                if (event.key === "Escape") {
                    closeModal();
                }
            });
        });

        let currentPlatform = '';
        let currentTab = 'routine';
        let checkedItems = {}; // Store checked state { "Platform-Tab-Index": true }

        // Platform Metadata (Icon & Color Config)
        const platformMeta = {
            "CoinMarketCap": { icon: "coins", color: "text-blue-600", bg: "bg-blue-50" },
            "Binance Square": { icon: "layout-grid", color: "text-yellow-500", bg: "bg-yellow-50" },
            "X (Twitter)": { icon: "twitter", color: "text-black", bg: "bg-gray-100" },
            "Medium": { icon: "book-open", color: "text-gray-800", bg: "bg-gray-100" },
            "LinkedIn": { icon: "linkedin", color: "text-blue-700", bg: "bg-blue-50" },
            "Facebook": { icon: "facebook", color: "text-blue-600", bg: "bg-blue-50" },
            "Instagram": { icon: "instagram", color: "text-pink-600", bg: "bg-pink-50" },
            "Reddit": { icon: "message-circle", color: "text-orange-600", bg: "bg-orange-50" },
            "Discord": { icon: "gamepad-2", color: "text-indigo-500", bg: "bg-indigo-50" },
            "Quora": { icon: "help-circle", color: "text-red-700", bg: "bg-red-50" },
            "WhatsApp": { icon: "phone", color: "text-green-500", bg: "bg-green-50" },
            "YouTube": { icon: "youtube", color: "text-red-600", bg: "bg-red-50" },
            "Substack": { icon: "mail", color: "text-orange-500", bg: "bg-orange-50" },
            "Gitter": { icon: "code-2", color: "text-purple-600", bg: "bg-purple-50" },
            "Tumblr": { icon: "image", color: "text-blue-900", bg: "bg-blue-50" }
        };

        // Platform-Specific Strategy Database (Categorized)
        const strategies = {
            "CoinMarketCap": {
                routine: [
                    "Post 1 major 'Market Prediction' in Community tab.",
                    "Comment on 5 trending tokens in your sector.",
                    "Reply to top 3 Bearish comments to neutralize FUD.",
                    "Post a weekly project milestone update.",
                    "Cross-post CMC link to Twitter to verify traffic.",
                    "Engage with users who added you to 'Watchlist'.",
                    "Monitor 'Gainers & Losers' list for trendjacking.",
                    "Host a 'CMC Live' chat or AMA session.",
                    "Track 7-day volume vs. price correlation.",
                    "Review 'Markets' tab for liquidity checks."
                ],
                sops: [
                    "Verify 'Self-Reported Tags' are up to date.",
                    "Check 'Gravity' score and aim for +5% increase.",
                    "Update circulating supply API endpoint if changed.",
                    "Analyze competitor 'Watchlist' growth rates.",
                    "Submit a new 'Article' to CMC Alexandria.",
                    "Refresh project description keywords for SEO.",
                    "Check for any 'Alerts' or warnings on your ticker.",
                    "Update team member profiles if verification needed.",
                    "Petition for 'verified' badge on new social links.",
                    "Document monthly 'Social Dominance' metric."
                ]
            },
            "Binance Square": {
                routine: [
                    "Post 3 'Long-form' articles (Insight badge).",
                    "Share 5 'Breaking News' snippets within 15 mins.",
                    "Use the weekly trending hashtags suggested by Binance.",
                    "Reply to 100% of comments on your articles.",
                    "Run a 'Poll' to boost engagement rates.",
                    "Network with 3 other 'Binance Feed' creators.",
                    "Post a 'Chart of the Week' technical analysis.",
                    "Share your Binance Square link on Twitter.",
                    "Translate best post into one other language.",
                    "Tag relevant tokens ($BTC, $BNB) correctly."
                ],
                sops: [
                    "Apply for the monthly 'Creator Campaign' tasks.",
                    "Analyze 'Shares' metric (highest viral signal).",
                    "Embed your specific Binance Referral ID in posts.",
                    "Convert a top-performing post into a graphic.",
                    "Check 'Creator Center' for traffic sources.",
                    "Update your profile bio with new achievements.",
                    "Review 'Follower Retention' graph.",
                    "Create content around upcoming Binance Launchpool.",
                    "Avoid 'Clickbait' titles to prevent reach penalties.",
                    "Plan content calendar for next month's crypto events."
                ]
            },
            "X (Twitter)": {
                routine: [
                    "Post 1 'Mega-Thread' (educational/value-add).",
                    "Host or co-host 1 'Twitter Space' audio session.",
                    "Reply to 5 'Big Accounts' within 5 mins of their post.",
                    "DM 3 potential collaborators/partners.",
                    "Check 'Reply Velocity' on new tweets.",
                    "Engage with 10 new accounts in your niche.",
                    "Post 3 'Visual' tweets (memes/charts/infographics).",
                    "Retweet 2 community members with added commentary.",
                    "Run a 'Flash Giveaway' or interaction bait.",
                    "Draft 10 tweets in advance for consistency."
                ],
                sops: [
                    "Rotate your 'Pinned Tweet' to the best recent offer.",
                    "Clean up 'Following' list (unfollow inactive).",
                    "Review Twitter Analytics for top performing hour.",
                    "Verify your 'Verified Organization' status/affiliates.",
                    "Search your brand name for un-tagged mentions.",
                    "Create a dedicated 'List' for competitors to monitor.",
                    "Update Header Image to match current campaign.",
                    "Analyze 'Profile Visits' to conversion rate.",
                    "Use 'Advanced Search' to find lead generation queries.",
                    "Review and update your Bio link (Linktree/Website)."
                ]
            },
            "Medium": {
                routine: [
                    "Publish 2 'Deep Dive' articles (1500+ words).",
                    "Submit articles to 3 major 'Publications'.",
                    "Reply to every 'Highlight' or comment.",
                    "Share 'Friend Links' on social media (bypass paywall).",
                    "Leave thoughtful comments on 5 viral articles.",
                    "Turn a Twitter thread into a blog post.",
                    "Follow 50 new writers in your niche.",
                    "Share story to LinkedIn/Newsletter.",
                    "Analyze which tags brought the most views.",
                    "Create a 'List' (curated collection) of your best posts."
                ],
                sops: [
                    "Update 'Canonical Links' for SEO safety.",
                    "Add a 'Call to Action' (Newsletter) at the bottom.",
                    "Review 'Read Ratio' (aim for >40%).",
                    "Edit 3 old articles to link to new ones (Interlinking).",
                    "Check 'Traffic Sources' (Google vs Internal).",
                    "Embed a relevant YouTube video in an article.",
                    "Update your 'About' page and pinned story.",
                    "Check email subscriber growth from Medium.",
                    "A/B test the headline of a low-performing article.",
                    "Export your email subscriber list for backup."
                ]
            },
            "LinkedIn": {
                routine: [
                    "Post 2 'PDF Carousels' (Document posts).",
                    "Comment on 5 'Top Voices' posts in your industry.",
                    "Send 10 personalized connection requests.",
                    "Write a recommendation for a partner/colleague.",
                    "Poll your network on a trending industry topic.",
                    "Engage with posts from target companies.",
                    "Post a personal story/lesson (vulnerability).",
                    "Share a video with captions (native upload).",
                    "Join and comment in 2 active LinkedIn Groups.",
                    "Tag 3-5 relevant people in a discussion post."
                ],
                sops: [
                    "Check your 'SSI Score' (Social Selling Index).",
                    "Update your 'Featured' section with latest wins.",
                    "Review 'Who viewed your profile' for leads.",
                    "Check analytics for 'Demographics' of viewers.",
                    "Clean up pending connection requests.",
                    "Endorse skills for 3 connections.",
                    "Repurpose a blog post into a LinkedIn Article.",
                    "Review your headline for keyword optimization.",
                    "Celebrate a team member or milestone publicly.",
                    "Analyze 'Dwell Time' proxies (comments/see more)."
                ]
            },
            "Facebook": {
                routine: [
                    "Post 4 'Reels' (vertical video) for reach.",
                    "Go 'Live' for 10+ minutes (favored by algorithm).",
                    "Reply to 'Top Fans' with priority.",
                    "Invite post likers to 'Follow' the page.",
                    "Share a post to 3 relevant Groups (as Page).",
                    "Create a 'Story' with a poll/sticker.",
                    "Post an album of photos (Event/Behind Scenes).",
                    "Collaborate/Tag another business page.",
                    "Ask a question to drive comments.",
                    "Cross-post Instagram content if relevant."
                ],
                sops: [
                    "Check 'Page Quality' tab for any violations.",
                    "Update the 'Cover Photo' with current CTA.",
                    "Review 'Negative Feedback' (Hides/Unfollows).",
                    "Boost a high-performing post ($5-$10 budget).",
                    "Check 'Inbox' for filtered/spam messages.",
                    "Verify business info (hours, website, email).",
                    "Pin a welcome post or current offer.",
                    "Analyze video retention at the 3-second mark.",
                    "Review 'Insights' for best time to post.",
                    "Set up or check 'Automated Replies' in Messenger."
                ]
            },
            "Instagram": {
                routine: [
                    "Post 8-12 'Reels' (primary growth engine).",
                    "Post daily 'Stories' (retention engine).",
                    "Use 'Interactive Stickers' (Polls, Q&A) in Stories.",
                    "Reply to DMs (Business/General folders).",
                    "Engage with hashtags in your niche (10 mins).",
                    "Collaborate with a creator using 'Collab' tag.",
                    "Share a customer testimonial/UGC.",
                    "Use trending audio in Reels.",
                    "Respond to comments with a question.",
                    "Post a carousel (Swipeable educational content)."
                ],
                sops: [
                    "Check 'Account Status' for shadowban risks.",
                    "Update 'Link in Bio' (Linktree/Bento).",
                    "Pin your top 3 posts (Intro, Offer, Viral).",
                    "Analyze 'Saves' vs 'Likes' on recent posts.",
                    "Archive old/irrelevant posts.",
                    "Create a 'Highlight' for new products/services.",
                    "Tag products if 'Instagram Shopping' active.",
                    "Review 'Reach' (Followers vs Non-Followers).",
                    "Geo-tag your location in posts.",
                    "Clean up 'Following' count."
                ]
            },
            "Reddit": {
                routine: [
                    "Post in a *new* subreddit to test reach.",
                    "Comment on 10 posts to build 'Karma'.",
                    "Reply to all comments on your threads.",
                    "Search for brand mentions (monitor sentiment).",
                    "Crosspost a successful thread to a related sub.",
                    "Award a helpful community member.",
                    "Post at peak hours (usually 7-9 AM EST).",
                    "Engage in 'Daily Discussion' threads.",
                    "Format a long text post with headers/bullets.",
                    "Host an AMA (Ask Me Anything) if relevant."
                ],
                sops: [
                    "Check 'Upvote Ratio' on last 5 posts.",
                    "Message the Mods before a major promotional post.",
                    "Analyze top posts of the month in your niche.",
                    "Create a 'Megathread' if running a subreddit.",
                    "Update User Flair in key communities.",
                    "Check for 'Shadowban' using external tools.",
                    "Review subreddit rules (they change often).",
                    "Use 'Spoiler' or 'NSFW' tags correctly if needed.",
                    "Delete posts with 0 upvotes (clean history).",
                    "Verify links in your profile are working."
                ]
            },
            "Discord": {
                routine: [
                    "Post in 'Announcements' channel (with @everyone).",
                    "Host a weekly 'Game Night' or 'Stage' event.",
                    "Welcome new members in general chat.",
                    "Assign 'Active' roles to top chatters.",
                    "Create a new 'Poll' to engage lurkers.",
                    "Message 'Server Boosters' to thank them.",
                    "Run a 'Meme Contest' or creative event.",
                    "Solicit feedback in a 'Suggestions' channel.",
                    "Check 'Ticket' support system response times.",
                    "Promote server link on other socials."
                ],
                sops: [
                    "Prune inactive members (if nearing cap).",
                    "Check 'Server Insights' for retention rates.",
                    "Update bot permissions and security.",
                    "Refresh 'Welcome' screen and onboarding.",
                    "Review 'Audit Log' for mod actions.",
                    "Archive dead channels to reduce clutter.",
                    "Add new emojis/stickers for the community.",
                    "Partner with another Discord server.",
                    "Review 'Safety Setup' (AutoMod levels).",
                    "Update channel topics/descriptions."
                ]
            },
            "Quora": {
                routine: [
                    "Answer 5 new questions in your niche.",
                    "Request answers from other experts.",
                    "Share your best answer to Twitter/LinkedIn.",
                    "Follow 5 new topics to populate feed.",
                    "Search for questions with 'High Views/No Answers'.",
                    "Format answers with bolding and images.",
                    "Engage with comments on your answers.",
                    "Answer a 'Trending' question immediately.",
                    "Merge duplicate questions if you find them.",
                    "Cite sources to increase credibility."
                ],
                sops: [
                    "Update 'Credential' line for specific topics.",
                    "Check 'Stats' for answer views/upvotes.",
                    "Promote a 'Space' if you manage one.",
                    "Edit top answer to include updated links.",
                    "Check for 'Collapsed' answers and appeal.",
                    "Run Quora Ads (review CTR if active).",
                    "Review 'Partner Program' earnings (if applicable).",
                    "A/B test the first sentence (the hook).",
                    "Analyze which topics bring best traffic.",
                    "Backup your best answers externally."
                ]
            },
            "WhatsApp": {
                routine: [
                    "Send 1 Broadcast message (High value only).",
                    "Update 'Status' (Stories) 2-3 times a week.",
                    "Reply to pending inquiries.",
                    "Analyze emoji reactions to broadcasts.",
                    "Create a 'Quick Reply' for common questions.",
                    "Share a 'Catalog' item link.",
                    "Ask for feedback via direct message.",
                    "Set 'Away Message' if offline.",
                    "Use 'Polls' in groups for engagement.",
                    "Promote WhatsApp link on Website/Instagram."
                ],
                sops: [
                    "Check 'Delivery' vs 'Read' rates.",
                    "Clean up inactive contacts/groups.",
                    "Update 'Business Profile' (Catalog/Hours).",
                    "Review 'Labels' for customer segmentation.",
                    "Check 'Group' permissions and spam settings.",
                    "Backup chat history.",
                    "Review 'Block' rate (did you spam?).",
                    "Test the 'Click-to-Chat' link functionality.",
                    "Segment list for targeted offers.",
                    "Verify API integration health (if using API)."
                ]
            },
            "YouTube": {
                routine: [
                    "Upload 1 Long-form video.",
                    "Upload 4-8 'Shorts' (Vertical).",
                    "Reply to comments (Heart the best ones).",
                    "Post in the 'Community Tab' (Poll/Image).",
                    "Optimize video tags and description SEO.",
                    "Add 'End Screens' and 'Cards' to new videos.",
                    "Collaborate or shout-out another channel.",
                    "Pin a comment with a CTA.",
                    "Share video link to Newsletter/Socials.",
                    "Research 5 video ideas for next month."
                ],
                sops: [
                    "Check 'CTR' (Click-Through Rate) on latest video.",
                    "Update thumbnails on low-performing videos.",
                    "Review 'Audience Retention' graph drops.",
                    "Update playlists (add new videos).",
                    "Check 'Copyright' tab for strikes/claims.",
                    "Analyze 'Traffic Sources' (Search vs Browse).",
                    "Check 'Subscribers Gained' per video.",
                    "Review 'Revenue' (RPM/CPM) if monetized.",
                    "Test a new video title format.",
                    "Update channel banner if needed."
                ]
            },
            "Substack": {
                routine: [
                    "Send 4 Newsletters (Weekly cadence).",
                    "Post 3-5 'Notes' (Short-form social).",
                    "Reach out to 3 writers for cross-promotion.",
                    "Add a 'Poll' or 'Button' inside the email.",
                    "Share an excerpt on Twitter/LinkedIn.",
                    "Reply to comments on the web version.",
                    "Restack a post from a peer.",
                    "Audio voiceover for a post (Podcast feature).",
                    "Check 'Open Rate' (Subject line health).",
                    "Plan themes for next month."
                ],
                sops: [
                    "Review 'Subscriber Overlap' recommendations.",
                    "Update 'Welcome Email' for new subs.",
                    "Clean email list (remove bouncing emails).",
                    "Check 'Gross Annualized Revenue' growth.",
                    "Offer a special discount/trial for paid.",
                    "Update 'About' page with social proof.",
                    "Analyze which links got the most clicks.",
                    "Enable 'Pledge' feature if not active.",
                    "Check 'Growth' sources (Direct vs Network).",
                    "Review 'Churn' reasons (if provided)."
                ]
            },
            "Gitter": {
                routine: [
                    "Reply to pending dev questions.",
                    "Welcome new contributors personally.",
                    "Ban spam bots immediately.",
                    "Announce new version/release in chat.",
                    "Ask for feedback on a specific feature.",
                    "Highlight a community contribution.",
                    "Engage with core maintainers.",
                    "Clarify documentation based on questions.",
                    "Run a 'Bug Hunt' discussion.",
                    "Tag users appropriately in replies."
                ],
                sops: [
                    "Sync/Update room topic with GitHub repo.",
                    "Check 'Activity' graph.",
                    "Archive resolved discussions.",
                    "Share room link in GitHub ReadMe.",
                    "Monitor 'Lurker' to 'Active' ratio.",
                    "Connect Matrix bridge if needed.",
                    "Update room integration hooks (webhooks).",
                    "Check response time metrics.",
                    "Review room permissions.",
                    "Export valuable chats to documentation."
                ]
            },
            "Tumblr": {
                routine: [
                    "Reblog 10 aesthetic/niche posts.",
                    "Post 3 original visual sets.",
                    "Research trending 'Tags' in your aesthetic.",
                    "Reply to 'Asks' (Q&A).",
                    "Submit content to a themed blog.",
                    "Queue posts for consistent daily activity.",
                    "Engage with the 'Dashboard' feed.",
                    "Use specific, long-tail tags.",
                    "Participate in a 'Fandom' event.",
                    "Answer anonymous asks."
                ],
                sops: [
                    "Check 'Notes' count on recent posts.",
                    "Update theme/HTML if needed.",
                    "Check 'Reblog Trees' for influencer discovery.",
                    "Promote your other socials in the sidebar.",
                    "Analyze which content type performs best.",
                    "Follow 20 new curated blogs.",
                    "Refresh your avatar/header.",
                    "Check for broken image links.",
                    "Cross-post to Pinterest.",
                    "Review follower growth trends."
                ]
            }
        };

        // Open Modal Function
        function openModal(platform) {
            const modal = document.getElementById('strategyModal');
            const title = document.getElementById('modalTitle');
            const iconContainer = document.getElementById('modalIconContainer');
            const iconElement = document.getElementById('modalIcon');
            
            // Set Platform Context
            currentPlatform = platform;
            
            // 1. Set Title
            title.textContent = platform;
            
            // 2. Set Icon and Color Branding
            const meta = platformMeta[platform] || { icon: "layers", color: "text-gray-600", bg: "bg-gray-100" };
            
            // Update Icon
            iconElement.setAttribute('data-lucide', meta.icon);
            // Remove old classes
            iconElement.className = `w-6 h-6 ${meta.color}`;
            iconContainer.className = `w-12 h-12 rounded-xl flex items-center justify-center ${meta.bg}`;

            // 3. Reset to Routine tab
            switchTab('routine');

            // 4. Show Modal
            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
            
            // Re-render icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // Switch Tab Function (Updated for segmented control)
        function switchTab(tabType) {
            currentTab = tabType;
            
            // Update Tab Styling (Pill style)
            const btnRoutine = document.getElementById('tabRoutine');
            const btnSOPs = document.getElementById('tabSOPs');
            
            const activeClass = "bg-white text-gray-900 shadow-sm";
            const inactiveClass = "text-gray-500 hover:text-gray-700 hover:bg-gray-200/50";
            
            if (tabType === 'routine') {
                btnRoutine.className = `flex-1 py-2 text-sm font-semibold rounded-md transition-all ${activeClass}`;
                btnSOPs.className = `flex-1 py-2 text-sm font-semibold rounded-md transition-all ${inactiveClass}`;
            } else {
                btnRoutine.className = `flex-1 py-2 text-sm font-semibold rounded-md transition-all ${inactiveClass}`;
                btnSOPs.className = `flex-1 py-2 text-sm font-semibold rounded-md transition-all ${activeClass}`;
            }

            // Render List (Now Rows)
            const listBody = document.getElementById('strategyTableBody');
            listBody.innerHTML = '';
            
            const platformData = strategies[currentPlatform] || { routine: [], sops: [] };
            const items = platformData[tabType] || ["No items found."];

            items.forEach((item, index) => {
                const uniqueId = `${currentPlatform}-${tabType}-${index}`;
                const isChecked = checkedItems[uniqueId] === true;

                const tr = document.createElement('tr');
                // Styling for row (hover, selection)
                tr.className = `task-row group border-b border-gray-50 hover:bg-gray-50 transition-colors cursor-pointer ${isChecked ? 'completed bg-blue-50/50 hover:bg-blue-50/80' : ''}`;
                tr.onclick = () => toggleTask(uniqueId, tr);

                // Column 1: Checkbox (Centered)
                const tdCheck = document.createElement('td');
                tdCheck.className = "px-6 py-4 whitespace-nowrap text-center";
                tdCheck.innerHTML = `
                    <div class="checkbox-box inline-flex w-5 h-5 rounded-md border-2 border-gray-300 items-center justify-center transition-all bg-white group-hover:border-blue-400">
                        <i data-lucide="check" class="checkbox-icon w-3.5 h-3.5 text-white opacity-0 transform scale-50 transition-all"></i>
                    </div>
                `;

                // Column 2: Action Item
                const tdAction = document.createElement('td');
                tdAction.className = "px-6 py-4 text-sm font-medium text-gray-700 task-text leading-snug";
                tdAction.textContent = item;

                // Column 3: Status Badge
                const tdStatus = document.createElement('td');
                tdStatus.className = "px-6 py-4 whitespace-nowrap text-right";
                
                // Dynamic Badge Logic
                const statusBadge = isChecked 
                    ? `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Completed</span>`
                    : `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600 group-hover:bg-blue-100 group-hover:text-blue-700 transition-colors">Pending</span>`;
                
                tdStatus.innerHTML = statusBadge;

                // Assemble Row
                tr.appendChild(tdCheck);
                tr.appendChild(tdAction);
                tr.appendChild(tdStatus);
                
                listBody.appendChild(tr);
            });

            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            
            // Update Progress Bar immediately
            updateProgress();
        }

        function toggleTask(id, rowElement) {
            // Toggle state
            checkedItems[id] = !checkedItems[id];
            
            // Re-render just this row's content to update badge? 
            // Better to re-render entire table or toggle classes/HTML manually for performance?
            // Since list is small (10 items), re-rendering the specific element logic is complex, 
            // let's just update classes and badge innerHTML manually for speed.
            
            const isChecked = checkedItems[id];
            const badgeCell = rowElement.lastElementChild;
            
            if (isChecked) {
                rowElement.classList.add('completed', 'bg-blue-50/50');
                rowElement.classList.remove('hover:bg-gray-50'); // Optional refinement
                badgeCell.innerHTML = `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Completed</span>`;
            } else {
                rowElement.classList.remove('completed', 'bg-blue-50/50');
                rowElement.classList.add('hover:bg-gray-50');
                badgeCell.innerHTML = `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600 group-hover:bg-blue-100 group-hover:text-blue-700 transition-colors">Pending</span>`;
            }
            
            // Update progress bar
            updateProgress();
        }

        function updateProgress() {
            // Calculate progress for CURRENT TAB only
            const platformData = strategies[currentPlatform] || { routine: [], sops: [] };
            const items = platformData[currentTab] || [];
            const total = items.length;
            
            let completed = 0;
            items.forEach((_, index) => {
                if (checkedItems[`${currentPlatform}-${currentTab}-${index}`]) {
                    completed++;
                }
            });

            // Avoid division by zero
            const percent = total === 0 ? 0 : Math.round((completed / total) * 100);
            
            // Update DOM
            document.getElementById('progressBar').style.width = `${percent}%`;
            document.getElementById('progressText').textContent = `${completed} of ${total} tasks completed`;
            document.getElementById('progressPercent').textContent = `${percent}%`;
            
            // Color change on completion
            const bar = document.getElementById('progressBar');
            if (percent === 100) {
                bar.classList.remove('bg-blue-600');
                bar.classList.add('bg-green-500');
            } else {
                bar.classList.add('bg-blue-600');
                bar.classList.remove('bg-green-500');
            }
        }

        // Close Modal Function
        function closeModal() {
            const modal = document.getElementById('strategyModal');
            modal.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
        }

        // Search Filter Function
        function filterTable() {
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("analyticsTable");
            tr = table.getElementsByTagName("tr");

            for (i = 1; i < tr.length; i++) { 
                var found = false;
                var columns = tr[i].getElementsByTagName("td");
                for (var j = 0; j < columns.length; j++) {
                    td = columns[j];
                    if (td) {
                        txtValue = td.textContent || td.innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            found = true;
                            break;
                        }
                    }
                }
                if (found) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    </script>
</body>
</html>
